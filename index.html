<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0f1216" />
  <title>Apéro de Nuit • Suivi</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="stylesheet" href="./styles.css" />

  <meta name="application-name" content="Apéro de Nuit • Suivi" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="dot" aria-hidden="true"></div>
      <div class="title">
        <div class="h1">Apéro de Nuit</div>
        <div class="h2">Suivi de commande (démo PWA)</div>
      </div>
    </div>

    <button id="btnInstall" class="btn ghost" hidden>Installer</button>
  </header>

  <main class="container">
    <section class="card">
      <div class="row">
        <div>
          <div class="label">Statut</div>
          <div id="status" class="value">Prêt</div>
        </div>
        <div class="right">
          <div class="label">Version</div>
          <div class="value mono">1.0.0</div>
        </div>
      </div>

      <div class="sep"></div>

      <div class="grid">
        <button id="btnOpenMap" class="btn primary">Ouvrir la carte</button>
        <button id="btnCheckUpdate" class="btn">Forcer mise à jour</button>
        <button id="btnHardReload" class="btn danger">Hard reload</button>
      </div>

      <p class="hint">
        Cette PWA inclut un <b>service worker “agressif”</b> : il prend immédiatement la main (skipWaiting + clientsClaim),
        supprime les anciens caches, et peut déclencher un rechargement propre pour appliquer la nouvelle version.
      </p>
    </section>

    <section class="card">
      <div class="label">Notes</div>
      <ul class="list">
        <li>Pour publier : mets ces fichiers sur ton hébergement HTTPS (GitHub Pages OK).</li>
        <li>Quand tu modifies un fichier, incrémente <span class="mono">APP_VERSION</span> dans <span class="mono">sw.js</span> et <span class="mono">index.html</span>.</li>
        <li>Le bouton <b>Forcer mise à jour</b> déclenche un check SW + activation immédiate si une nouvelle version est dispo.</li>
      </ul>
    </section>
  </main>

  <footer class="legal">
    L’abus d’alcool est dangereux pour la santé, à consommer avec modération.
  </footer>

  <script src="./app.js"></script>
</body>
</html>
